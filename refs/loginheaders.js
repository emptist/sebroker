curl: "https://service.htsc.com.cn/service/loginAction.do?method=login" -H "Cookie: __utma=249860889.1993829779.1432911006.1440648966.1446029513.4; __utmz=249860889.1432911006.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); JSESSIONID=1QTTW2cXpt8CykHQZFp1Vn2m225TZ7dTkqKpT7LWrG2Khc05ZL3s!979201071; SESSION_COOKIE=61781" -H "Origin: https://service.htsc.com.cn" -H "Accept-Encoding: gzip, deflate" -H "Accept-Language: en-US,en;q=0.8,zh-TW;q=0.6,zh;q=0.4,zh-CN;q=0.2,en-GB;q=0.2" -H "Upgrade-Insecure-Requests: 1" -H "User-Agent: Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.125 Safari/537.36" -H "Content-Type: application/x-www-form-urlencoded" -H "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8" -H "Cache-Control: max-age=0" -H "Referer: https://service.htsc.com.cn/service/login.jsp" -H "Connection: keep-alive" -H "DNT: 1" --data "userType=jy&loginEvent=1&trdpwdEns=2d8c0c21d479305c539e7a49ecd87d4d&macaddr=00-1B-B1-28-38-26&hddInfo=5VEWYCT6&lipInfo=192.168.1.101+&CPU=QkZFQkZCRkYwMDAzMDY2MQ"%"3D"%"3D&PCN=U0RXTS0yMDEzMDkxNFNX&PI=QyxOVEZTLDYwLjAwMzg"%"3D&topath=null&accountType=1&userName=080300007199&servicePwd=19660522&trdpwd=2d8c0c21d479305c539e7a49ecd87d4d&vcode=e554" --compressed
Formdata:
userType=jy&loginEvent=1&trdpwdEns=2d8c0c21d479305c539e7a49ecd87d4d&macaddr=00-1B-B1-28-38-26&hddInfo=5VEWYCT6&lipInfo=192.168.1.101+&CPU=QkZFQkZCRkYwMDAzMDY2MQ%3D%3D&PCN=U0RXTS0yMDEzMDkxNFNX&PI=QyxOVEZTLDYwLjAwMzg%3D&topath=null&accountType=1&userName=080300007199&servicePwd=19660522&trdpwd=2d8c0c21d479305c539e7a49ecd87d4d&vcode=e554

Requestheader:

POST /service/loginAction.do?method=login HTTP/1.1
Host: service.htsc.com.cn
Connection: keep-alive
Content-Length: 336
Cache-Control: max-age=0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
Origin: https://service.htsc.com.cn
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.125 Safari/537.36
Content-Type: application/x-www-form-urlencoded
DNT: 1
Referer: https://service.htsc.com.cn/service/login.jsp
Accept-Encoding: gzip, deflate
Accept-Language: en-US,en;q=0.8,zh-TW;q=0.6,zh;q=0.4,zh-CN;q=0.2,en-GB;q=0.2
Cookie: __utma=249860889.1993829779.1432911006.1440648966.1446029513.4; __utmz=249860889.1432911006.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); JSESSIONID=1QTTW2cXpt8CykHQZFp1Vn2m225TZ7dTkqKpT7LWrG2Khc05ZL3s!979201071; SESSION_COOKIE=61781

Response headers:
HTTP/1.1 200 OK
Cache-Control: no-cache
Date: Sat, 26 Dec 2015 09:25:35 GMT
Pragma: No-cache
Transfer-Encoding: chunked
Content-Type: text/html; charset=utf-8
Expires: Thu, 01 Jan 1970 00:00:00 GMT
Set-Cookie: JSESSIONID=THWhW2dP1Wh2Rgq3Wm8yzHjLQQj3V1RH3Q8p9gvJ3nwnv48lHvLg!104243085; path=/
X-Powered-By: Servlet/2.5 JSP/2.1
Set-Cookie: SESSION_COOKIE=71761; path=/
Connection: close

Response:

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<script type="text/javascript" src="/service/js/base64.js"></script>




<html xmlns="http://www.w3.org/1999/xhtml">





<head>
<title>华泰证券-华泰在线－网上营业厅</title>
<meta http-equiv="X-UA-Compatible" content="IE=7"/>
<link href="/service/css/service.css" rel="stylesheet" type="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>华泰证券-华泰在线－网上营业厅</title>
<META NAME="description" CONTENT="华泰证券">
<META NAME="keywords" CONTENT="华泰证券,网上交易,证券行情,股票投资咨询,财经新闻,中国证券市场,推荐股票,专家在线,证券软件下载,交易软件,股票软件,中国股市">
<link rel="shortcut icon" href="wsyyt/favicon.ico"/>
<script src="/service/Scripts/swfobject_modified.js" type="text/javascript"></script>
<link href="/service/css/businessProcess.css" rel="stylesheet" type="text/css" />
<!-- 显示消息提示的层 -->
<link href="/service/css/showAlertMsg.css" rel="stylesheet" type="text/css" />
<script src="/service/js/showAlertMsg.js"></script>
<!-- 显示消息提示的层end -->
<script language="javascript" src="/service/js/keyboard.js" ></script>
<script language="javascript" src="/service/js/csswebutf.js"></script>
<script type="text/javascript" src="/service/js/cookie.js"></script>
<script src="/service/Scripts/swfobject_modified.js" type="text/javascript"></script>
<script src="/service/js/jquery126_pack.js" type="text/javascript"></script>

<style type="text/css">
<!--
* { margin:0 auto;}
body {font:12px Arial, Helvetica, sans-serif;margin:0;padding:0;}
p { text-indent:0;}


-->
</style>

<script type="text/javascript">
	jQuery(document).ready(function(){
		jQuery("#a2").removeAttr("onclick");
	});

	function checkForm(){
		var name=document.getElementById("userName").value;
		if(document.loginForm.loginEvent.value == "1"){
			return false;
		}
		if(name.length==0){
			if(document.loginForm.userType.value == "jy"){
				showAlertMsg("请输入客户号！");
			}else{
				if(document.loginForm.accountType.value == "1"){
					showAlertMsg("请输入身份证号码！");
				}else{
					showAlertMsg("请输入TA账号！");
				}
			}
			document.getElementById("userName").focus();
			return false;
		}

		if(document.loginForm.userType.value == "jy"){
			if(document.loginForm.servicePwd.value == ''){
				showAlertMsg("请输入通讯密码！");
				document.getElementById("servicePwd").focus();
				return false;
			}else if(document.loginForm.servicePwd.value.length < 6){
				showAlertMsg("通讯密码长度需大于等于6位！");
				document.getElementById("servicePwd").focus();
				return false;
			}else if(document.loginForm.servicePwd.value.length > 20){
				showAlertMsg("通讯密码长度不能超过20位！");
				document.getElementById("servicePwd").focus();
				return false;
			}
		}



		//改成兼容FF
		if(document.loginForm.userType.value == 'jy'){
			if(!checkPwd()){
				return false;
			}
			document.getElementById("trdpwd").value = getPwd();
		}

		//var trdpwd=document.getElementById("trdpwd").value;
		//if(trdpwd.length==0){
		//	showAlertMsg("请输入密码!");
		//	document.getElementById("trdpwd").focus();
		//	return false;
		//}


		var vcode=document.getElementById("vcode").value;
		if(vcode.length==0){
			showAlertMsg("请输入验证码！");
			document.getElementById("vcode").focus();
			return false;
		}


		if(document.getElementById("dynpwdCheck").checked == true){
			var dynpwd=document.getElementById("dynpwd").value;
			if(dynpwd.length==0){
				showAlertMsg("请输入动态口令！");
				document.getElementById("dynpwd").focus();
				return false;
			}
		}else{
			var dynpwd=document.getElementById("dynpwd").value;
			if(dynpwd != ""){
				//document.getElementById("dynpwd").value=base64encode(document.getElementById("dynpwd").value);
			}

		}

		document.loginForm.loginEvent.value = "1";
		return true;
	}

	//检测密码合法性
function checkPwd(){


		    try{
		        var trdpwd = document.getElementById("loginActiveX").GetEncPswAes();
		        if( trdpwd.length==0 || trdpwd=='b0c858b6fa553839768d4a96fc8962fc'){
		        	showAlertMsg("请输入密码!");
		            return false;
		        }
		        document.getElementById("trdpwdEns").value = trdpwd; //保存密码
		        var mac = getMac(); //取mac地址

		        document.getElementById("macaddr").value = mac;
	        }catch(e){
	        }


    return true;
}

//获取密码
function getPwd(){


			//var loginActiveX = document.getElementById('loginActiveX');
			//var trdpwd = loginActiveX.EncPsw();
			var trdpwd = document.getElementById("trdpwdEns").value;


    return trdpwd;
}

	//用户登录
	function userLogin(){
		if(checkForm()){
			document.getElementById("userLoginImg1").outerHTML = "";
			document.getElementById("userLoginImg2").style.display = "";
			document.loginForm.action = "/service/loginAction.do?method=login" ;
			document.loginForm.method = "post";
			document.loginForm.submit();
		}
	}

	//更换验证码
	function changeVcode(){
		document.getElementById("captchaImage").src = "/service/pic/verifyCodeImage.jsp?ran="+Math.random();
	}

	//页面按键处理
	function keypress1(obj,keyCode)
	{

	  if (keyCode == 13)
		{
			if(obj!=null){
				if(obj=="servicePwd"){ //如果是回车 要求跳转到服务密码
					if(document.loginForm.userType.value == "jy"){
						document.loginForm.servicePwd.focus();
					}else{
						document.getElementById("trdpwd").focus();
						//document.loginForm.trdpwd.focus();
					}

				}else if(obj=="trdpwd"){
					if(document.loginForm.userType.value == "jy"){

						//改成兼容FF
						//document.getElementById("trdpwd").focus();
						document.getElementById("loginActiveX").focus();

					}else{
						document.getElementById("trdpwd").focus();
					}

				}else{
					eval("document.loginForm."+obj+".focus()");
				}

			}else{
				userLogin();
			}
		}

	}

	//切换用户类型
	function chageUserType(userType){
		//var userType = document.loginForm.userType.value;
		document.loginForm.userType.value = userType;

		if(userType=="jy"){ //如果是交易客户
			document.getElementById("accountName").innerHTML = "客&nbsp;&nbsp;户&nbsp;&nbsp;号";
			document.getElementById("accountPwd").innerHTML = "交易密码";
			document.getElementById("accountTypeSelect").style.display = "none";

			document.getElementById("servicePwdId").style.display = "";//服务密码 显示

			document.getElementById("dynpwdId").style.display = "";//动态口令 显示


			document.getElementById("tradePwdId").style.display = "";//交易密码 显示
			document.getElementById("searchPwdId").style.display = "none";//查询密码 隐藏
			document.getElementById("firstLoginPwd").style.display = "none"; //首次登录密码设置 隐藏

			document.getElementById("showPage").style.display = ""; //页面委托方式 显示
			document.getElementById("showDownload").style.display = ""; //下载安全控件 显示
			document.getElementById("toPayshowp2").style.display = "none"; //友情提示密码重置 隐藏


		}else if(userType=="zjlc"){ //如果是紫金理财客户
			//document.getElementById("trdpwd").value = "";
			document.getElementById("accountTypeSelect").style.display = "";
			document.getElementById("accountName").innerHTML = "身份证号";
			document.getElementById("accountPwd").innerHTML = "查询密码";

			document.getElementById("servicePwdId").style.display = "none"; //服务密码 隐藏
			document.getElementById("dynpwdId").style.display = "none";//动态口令 隐藏

			document.getElementById("tradePwdId").style.display = "none";//交易密码 隐藏
			document.getElementById("searchPwdId").style.display = ""; //查询密码 显示
			document.getElementById("firstLoginPwd").style.display = ""; //首次登录密码设置 显示

			document.getElementById("showPage").style.display = "none"; //页面委托方式 隐藏
			document.getElementById("showDownload").style.display = "none"; //下载安全控件 隐藏
			document.getElementById("toPayshowp2").style.display = ""; //友情提示密码重置 显示
		}
	}

	function chageAccountType(){
		var accountType = document.loginForm.accountType.value;

		if(accountType=="1"){
			document.getElementById("accountName").innerHTML = "身份证号";
		}else{
			document.getElementById("accountName").innerHTML = "TA&nbsp;账号  ";
		}
	}


	//创建ActiveXObject
function showActiveX(){
   var activexobject = '<OBJECT id="DCsswebLogin1" name="DCsswebLogin1" style="WIDTH: 105px; HEIGHT: 20px" classid="clsid:258927F7-0EFD-4AB3-A766-97626BB16A35" >' +
                       '<PARAM NAME="_Version" VALUE="65536"/>'+
                       '<PARAM NAME="_ExtentX" VALUE="3069"/>'+
                       '<PARAM NAME="_ExtentY" VALUE="720"/>'+
                       '<PARAM NAME="_StockProps" VALUE="1234"/>'+
                       '</OBJECT>';
   return activexobject;
}

//下载控件与添加信任站点
function dlActiveX(){
    //document.getElementById("setupActiveX").style.display="";
    document.getElementById("loginActiveX").innerHTML = "";

    showConfirmBoxMsg("您的安全控件不是最新版本，请先安装或更新<br><a href='/service/wsyyt/login/htnet_client.exe'> <font color='red'><u>安全控件</u></font></a>。安装完后请重启浏览器才能生效！","/service/wsyyt/login/htnet_client.exe");
}

//检索控件.
function DetectActiveX()
{

		if('Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.125 Safari/537.36'.indexOf("MSIE") != -1 || 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.125 Safari/537.36'.indexOf("rv:11") != -1 ){ //如果是IE或者IE11
		    try {
		        //去查找下载的控件(已经安装过)
		        var comActiveX = new ActiveXObject("CSSWEBLOGINHT.CsswebLoginHtCtrl.1");
	            //需要版本升级时候取消
		        try{
			        document.getElementById("loginActiveX").innerHTML = showActiveX();
	            	//检测版本号
	            	var pwdActiveX = document.getElementById("DCsswebLogin1");
	            	var dllVersion = pwdActiveX.DllVersion();
	            	dllVersion = dllVersion.replace(/, /ig,"");

		            if(parseInt(dllVersion) < 1012){
		               dlActiveX();
		               return false;
		            }else{
		            	document.getElementById('objSUDiv').style.display='none';
		            }
	            }catch(e){
	             //为老版本，提示升级
	             dlActiveX();
	             return false;
	            }
		    } catch (e) {
		        dlActiveX();
		    }
		   　return true;
		}else {//如果其它
			var mimetype = navigator.mimeTypes["application/csswebsafeloginht"];
			if(mimetype) {
				var loginActiveX = document.getElementById('loginActiveX');
	            //需要版本升级时候取消
		        try{
	            	//检测版本号
	            	var dllVersion = loginActiveX.DllVersion();
                    dllVersion = dllVersion.replace(/, /ig,"");
		            if(parseInt(dllVersion) < 1012){
		               dlActiveX();
		               return false;
		            }else{
		            	document.getElementById('objSUDiv').style.display='none';
		            }
	            }catch(e){
	             return false;
	            }
			}else {
			    dlActiveX();
			}
		}

}

//点击图片进行下载
function downExe(){
    alert("请在安全控件安装前，关闭本页面。安装完后，再打开，就可以登陆网上营业厅！");
    window.location.href = "/service/wsyyt/login/htnet_client.exe";
}

	//展示层
	function showDiv(){
		document.getElementById('light').style.width = window.screen.availWidth-25+'px';

		document.getElementById('light').style.display='block';
		document.getElementById('fade').style.display='block';

		document.getElementById('light2').style.display='none';
		document.getElementById('fade2').style.display='none';

		document.getElementById('light3').style.display='none';
		document.getElementById('fade3').style.display='none';
	}

	//展示层
	function showDiv2(){
		document.getElementById('light2').style.width = window.screen.availWidth-25+'px';
		document.getElementById('light2').style.display='block';
		document.getElementById('fade2').style.display='block';

		document.getElementById('light').style.display='none';
		document.getElementById('fade').style.display='none';

		document.getElementById('light3').style.display='none';
		document.getElementById('fade3').style.display='none';
	}

	//展示层
	function showDiv3(){

		document.getElementById('light3').style.width = window.screen.availWidth-25+'px';

		document.getElementById('light3').style.display='block';
		document.getElementById('fade3').style.display='block';

		document.getElementById('light').style.display='none';
		document.getElementById('fade').style.display='none';

		document.getElementById('light2').style.display='none';
		document.getElementById('fade2').style.display='none';

	}

	function enterToTab(event){
	   var e = event?event:window.event
	   if(e.keyCode == 13){
	     e.keyCode = 9;
	   }
	}

	function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}
function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}


//获取MAC地址
function getMac(){
    var mac = "";

	    try{

	        	try{
	                //mac = document.getElementById('loginActiveX').FirstMac();
	                mac = document.getElementById('loginActiveX').ComputerMac();
	                mac = mac.substring(0,17); //取第一个mac地址

	                var hdd  = document.getElementById('loginActiveX').HDSerialNo();
	                document.getElementById("hddInfo").value = hdd;
			        //if(hdd!=''&&hdd.length>32){
			        //	document.getElementById("hddInfo").value = hdd.substring(12,32);
			        //}

			        var  lip = document.getElementById('loginActiveX').ComputerIP();
			        document.getElementById("lipInfo").value = lip;

			        var  PCN = document.getElementById("loginActiveX").HostName();
			        document.getElementById("PCN").value = base64encode(utf16to8(PCN));

			        var  CPU = document.getElementById("loginActiveX").CPUID();
			        document.getElementById("CPU").value = base64encode(CPU);

			        var  PI = document.getElementById("loginActiveX").SysDiskInfo();
			        document.getElementById("PI").value = base64encode(PI);
			    }catch(e){

	           	}



	    }catch(e){ }

    return mac;
}


function changeDynpwd(){
	if(document.getElementById("dynpwdCheck").checked == true){
		document.getElementById("dynpwd").disabled = "";
		document.getElementById("dynpwd").style.backgroundColor = "#E2F3FF";
		document.getElementById("dynpwd").focus();
	}else{
		document.getElementById("dynpwd").value = "";
		document.getElementById("dynpwd").disabled = "disabled";
		document.getElementById("dynpwd").style.backgroundColor = "#9c9c9c";
	}
}

</script>
<meta name="WT.cg_n" content="网上营业厅"></head>
<OBJECT ID="cssweb" WIDTH=0 HEIGHT=0 CLASSID="CLSID:1BC4E1F9-758D-4BDA-A7DE-A9E1DA7D1E41"></OBJECT>
<body>
<div class="service_body_bg1"></div>
<div class="service_body_bg2"></div>
<div class="service_body_bg3"><a href="http://www.htsc.com.cn/htzq/knSoSoAction.do?method=sosoask" target="_blank"><img src="/service/pic/service/online.jpg" align="absmiddle"/></a></div>
<table border="0" cellspacing="0" cellpadding="0" width="1004">
  <!--<tr>
    <td rowspan="2" class="centent_logo_left"></td>
    <td rowspan="2"><img src="/service/pic/service/logo.jpg"/></td>
    <td class="nav_top_img"></td>
    <td rowspan="2" class="centent_logo_rig"></td>
  </tr>-->
  <tr>
    <td><img src="/service/pic/service/nav_img1.jpg" name="k_line_title" usemap="#Map"/></td>
  </tr>
</table>
<form name="loginForm">
<table border="0" cellspacing="0" cellpadding="0" width="1004">
  <tr>
    <td class="centent_left_bg"></td>
    <td class="centent_banner_bg"><object id="FlashID" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="349" height="294">
      <param name="movie" value="flash/service_banner.swf" />
      <param name="quality" value="high" />
      <param name="wmode" value="opaque" />
      <param name="swfversion" value="9.0.45.0" />
      <!-- 此 param 标签提示使用 Flash Player 6.0 r65 和更高版本的用户下载最新版本的 Flash Player。如果您不想让用户看到该提示，请将其删除。 -->
      <param name="expressinstall" value="../Scripts/expressInstall.swf" />
      <!-- 下一个对象标签用于非 IE 浏览器。所以使用 IECC 将其从 IE 隐藏。 -->
      <!--[if !IE]>-->
      <object type="application/x-shockwave-flash" data="flash/service_banner.swf" width="349" height="294">
        <!--<![endif]-->
        <param name="quality" value="high" />
        <param name="wmode" value="opaque" />
        <param name="swfversion" value="9.0.45.0" />
        <param name="expressinstall" value="../Scripts/expressInstall.swf" />
        <!-- 浏览器将以下替代内容显示给使用 Flash Player 6.0 和更低版本的用户。 -->
        <div>
          <h4>此页面上的内容需要较新版本的 Adobe Flash Player。</h4>
          <p><a href="http://www.adobe.com/go/getflashplayer"><img src="/service/pic/service/get_flash_player.gif" alt="获取 Adobe Flash Player" width="112" height="33" /></a></p>
        </div>
        <!--[if !IE]>-->
      </object>
      <!--<![endif]-->
    </object></td>
    <td class="centent_login_bg">
    <div id="inf_1">
    <table width="100%" border="0" cellpadding="0" cellspacing="0" class="login_tab_warp">
      <input type="hidden" name="userType" value="jy" />
      <input type="hidden" name="loginEvent"/>
      <INPUT type=hidden name="trdpwdEns" id="trdpwdEns" />
      <input type="hidden" name="macaddr" id="macaddr"/>
      <input type="hidden" id="pwdtype" value="activex"/>
      <input type="hidden" name="hddInfo" id="hddInfo"/>
      <input type="hidden" name="lipInfo" id="lipInfo"/>
      <input type="hidden" name="CPU" id="CPU"/>
      <input type="hidden" name="PCN" id="PCN"/>
      <input type="hidden" name="PI" id="PI"/>
      <input type="hidden" name="topath" value="null" />
      <tr>
        <td width="90" class="right"></td>
        <td width="170" class="left"></td>
      	<td rowspan="7" class="rig_img_mar "><a href="#" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image15','','/service/pic/service/rig_img_s.jpg',1)" onClick="showDiv3();"><img src="/service/pic/service/rig_img.jpg" name="Image15" width="29" height="123" border="0" id="Image15" /></a></td>
      </tr>
      <tr id="accountTypeSelect" style="display: none">
        <td width="90" class="right">登录类型：</td>
        <td width="170" class="left">
        	 <select name="accountType" onChange="chageAccountType();" class="input_select" id="accountType">
			    <option value="1" >身份证号码</option>
				<option value="2">TA账号</option>
			  </select>
        </td>
      </tr>
      <tr>
        <td width="90" class="right"><span id="accountName">客 户 号</span>：</td>
        <td width="170" class="left">
        	<input name="userName" id="userName" type="text" value="080300007199" style="width: 100px;"  onKeyPress="keypress1('trdpwd',event.keyCode);"  class="login_input2"/>
        	<a href="http://www.htsc.com.cn/htzq/zhkhh/findUserNo.jsp" target="_blank" style="color:#9ed3f9; text-decoration:underline;">找回客户号</a>
        </td>

      </tr>

      <tr id="tradePwdId">
        <td class="right"><span id="accountPwd">交易密码</span>：</td>
        <td class="left">

			  	<embed id="loginActiveX2" name="kk2" type="application/csswebhardinfo" width="0" height="0">	<!-- 获取硬件特征码 -->
			  	<embed id="loginActiveX" name="kk" type="application/csswebsafeloginht" width="98" height="20">

			  <!--
			  	<div style="overflow: hidden; width: 120px; height: 20px; padding-top: 0px;padding:0px;float: left">
				  	<embed id="loginActiveX" name="kk" type="application/csswebsafelogin" width="100" height="25">
		        	<img src="/service/pic/service/keyboard_img.jpg" id="keyboard" style="margin-left: 5px; cursor: pointer;margin-top:-20px;float:right;"/>
			  	</div>
			  	 -->

        </td>
      </tr>
      <tr id="servicePwdId">
        <td class="right">通讯密码：</td>
        <td width="170" class="left"><input style="width:65px; margin-right:5px;" name="servicePwd" type="password" style="width: 148px;"  id="servicePwd" onKeyPress="keypress1('vcode',event.keyCode);"  class="login_input"/><a href="https://service.htsc.com.cn/service/servicePwd/forgotPsw.jsp" target="_blank" style="color:#9ed3f9; text-decoration:underline;">重置密码</a></td>
      </tr>
      <tr id="searchPwdId" style="display: none">
        <td class="right">查询密码：</td>
        <td class="left"><input name="trdpwd" type="password" style="width: 148px;"  id="trdpwd" onKeyPress="keypress1('vcode',event.keyCode);" class="login_input"/></td>
      </tr>
      <tr id="firstLoginPwd" style="display: none">
      	<td></td>
      	<td><a class="loginbtn" href="javascript:void(0);" onclick="javascript:Effect.openwin('payshowp1')">首次登录密码设置</a></td>
      </tr>
      <tr>
        <td class="right">验 证 码：</td>
        <td class="left">
        	<input name="vcode" type="text" class="login_input3" style="width: 65px" maxlength="4" id="vcode" />&nbsp;
			<img id="captchaImage" src="/service/pic/verifyCodeImage.jsp" title="看不清楚？点击换一张"  onclick="changeVcode();" align="absmiddle" style="margin-left:5px;cursor: pointer;"/>
        </td>
      </tr>
      <tr id="dynpwdId">
        <td class="left"><input type="checkBox"  id="dynpwdCheck" name="dynpwdCheck" onclick="changeDynpwd();"/> 动态口令：</td>
         <td class="left"><input name="dynpwd" type="password" style="width: 148px;"  disabled="disabled" id="dynpwd" class="login_input1"/></td>
      </tr>


        <tr>
        <td >
        </td>
        <td class="pd_t10"><a href="javascript:void(0);"><img id="userLoginImg1" onClick="userLogin();" src="/service/pic/service/login_bot.jpg" align="absmiddle"/>
        <img id="userLoginImg2" style="display:none;" src="/service/pic/service/login_bot2.jpg" align="absmiddle"/></a><br /></td>
        </tr>



      <tr id="toPayshowp2" style="display: none">
        <td colspan="2"><b>友情提示</b>：忘记密码，请点击<a class="btn1" href="javascript:void(0)" onclick="javascript:Effect.openwin('payshowp2')">密码重置</a>，该功能仅适用于已登录并预留手机号的客户使用。</td>
      </tr>
      <tr id="showPage">
        <td colspan="2" style="height:22px; line-height:22px;"><img src="/service/pic/service/icon_img.jpg" align="absmiddle"/>&nbsp;<font style="color: #B2E2FE">客户登录网厅须先开通</font>&nbsp;<a href="/service/servicePwd/pageEnt.jsp" target="_blank" class="font_yellow">页面委托方式</a></td>
        </tr>
      <tr id="showDownload">
        <td colspan="2" style="height:22px; line-height:22px;"><img src="/service/pic/service/icon_img.jpg" align="absmiddle"/>&nbsp;<font style="color: #B2E2FE">不能输入交易密码请</font>&nbsp;<a href="/service/wsyyt/login/htnet_client.exe" class="font_yellow"><span id="dhText">下载安全控件</span></a>
	  <script language="javascript">
	  function ct(){
	  var obj = document.getElementById("dhText");
	  obj.style.color = obj.style.color==""?"red":"";
	  setTimeout("ct()",1000);
	  }
	  //ct();
	  </script>
	  </td>
      </tr>
    </table>
    </div>


<div class="white_content" id="light">
<div class="white_input_warp">
	<table border="0" cellspacing="0" cellpadding="0">
	  <tr>
	    <td style="width:228px; height:53px; background-image:url(/service/pic/wsyyt/businessProcess/skpic/banner_open2.jpg); text-align:right; padding-right:10px; vertical-align:top; padding-top:10px;"><a href="#" onclick ="document.getElementById('light').style.display='';document.getElementById('fade').style.display=''"><img src="/service/pic/wsyyt/businessProcess/skpic/close_bot.jpg" onclick="document.getElementById('light').style.display='none';document.getElementById('fade').style.display='none'"/></a></td>
	  </tr>
	  <tr>
	    <td style="background-color:#ADD5EF; width:208px; text-align:left; padding:10px 10px 30px 15px; line-height:22px; color:#10466C;">
	    <p>如果您忘记交易密码，请您本人携带身份证，股东账户卡，资金账户卡到开户营业部柜台办理“交易密码重置”业务。</p>
		<p>如果您是机构用户<a href="/service/login_zl.jsp"><font color="red">点击进入</font></a></p>
	    </td>
	  </tr>
	</table>
</div>
</div>
<div id="fade" class="black_overlay"></div>


<div class="white_content" id="light2">
<div class="white_input_warp">

<table border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td style="width:228px; height:53px; background-image:url(/service/pic/wsyyt/businessProcess/skpic/banner_open.jpg); text-align:right; padding-right:10px; vertical-align:top; padding-top:10px;"><a href="#" onclick ="document.getElementById('light2').style.display='';document.getElementById('fade2').style.display=''"><img src="/service/pic/wsyyt/businessProcess/skpic/close_bot.jpg" onclick="document.getElementById('light2').style.display='none';document.getElementById('fade2').style.display='none'"/></a></td>
  </tr>
  <tr>
    <td style="background-color:#ADD5EF; width:208px; text-align:left; padding:10px 10px 30px 15px; line-height:22px; color:#10466C;">
   	<p>请进入网上交易客户端软件进行密码重置<a href="http://www.htsc.com.cn/htsc/wsyyt/personalServices/setpwd.swf" target="_blank"><font color="red">（教学视频）</font></a></p>
    </td>
  </tr>
</table>
</div>
</div>
<div id="fade2" class="black_overlay"></div>


<div class="white_content" id="light3">
<div style="width: 100%; height: 297px;margin-top: 240px;position:absolute;z-index:1;">
	<div style="width: 638px;" align="right">
		<iframe frameborder="0" style="top:0px;left:0px; width:297px; height:240px;" src="openbg.html"></iframe>
	</div>
</div>

</div>


<div id="fade3" class="black_overlay"></div>


    </td>
    <td class="centent_right_bg"></td>
  </tr>
</table>
</form>
<div class="service_bot_img">
<p style=" width:600px; margin:0 auto; font-size: 14px; font-weight: bold;">友情提醒：尊敬的客户您好，为了加强用户信息的安全保护，我们将在近期内进行网上营业厅加密控件的升级，请您于2016年1月31日前点击<a style="color:#f00;" href="/service/wsyyt/login/htnet_client.exe" target="_blank">“下载安全控件”</a>进行升级操作，以免影响登陆使用，感谢您的配合。</p>

</div>
<!--
<table border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td class="font_bottom_left"></td>
    <td class="font_bottom_centent">
    1、请不要在网吧等公共场所的电脑上进行网上交易；2、请在自己的电脑中安装杀毒软件和防火墙； 3、易记的密码也许对于盗用者来说也是很好破译的，所以尽量不要有规律。<br/>
    4、加强版登录（适用于ie浏览器）：网上营业厅登录默认加强版登录，采用安全控件方式，保障登录安全（适用于ie浏览器，非ie浏览器用户，系统将自动切换到标准登录）。
    </td>
    <td class="font_bottom_rig"></td>
  </tr>
</table>
 -->
<div class="service_bot_bg_bot"></div>
<SCRIPT type="text/javascript" src="js/tag.js"></SCRIPT>
<!--<map name="Map" id="Map">
<area shape="rect" coords="157,3,300,27" href="javascript:switch_kline('newtags1');" id="bg_1" onclick="chageUserType('jy');" onfocus="this.blur()" />
<area shape="rect" coords="8,3,151,27" href="javascript:switch_kline('newtags2');" id="bg_2" onclick="chageUserType('zjlc');" onfocus="this.blur()" />
</map>-->

<map name="Map" id="Map">
<area shape="rect" coords="497,3,640,27" href="javascript:switch_kline('newtags1');" id="bg_1" onclick="chageUserType('jy');" onfocus="this.blur()">
<area shape="rect" coords="350,3,490,27" href="http://htamc.htsc.com.cn/login/QueryExtraInfo/getExtraInfo.do" target="_blank">
<area shape="rect" coords="200,3,340,27" href="https://member.zhangle.com/openMobile/index.jsp" target="_blank">
</map>
<script type="text/javascript">
<!--
swfobject.registerObject("FlashID");
//-->
</script>

<!--
<div class="openCont" id="msgCont" style="width:300px; border:2px solid #9dcae4;display: none; z-index:9999;" onmousedown="moveInit('msgCont',event);" onmousemove="Move('msgCont',event)" onmouseup="stopMove()" onmouseout="stopMove()">
 -->
 <div class="openCont" id="msgCont" style="width:300px; border:2px solid #9dcae4;display: none; z-index:9999;">
 <iframe frameborder="0" style="position:absolute;top:0px;left:0px; width:300px; height:147px;z-index:-1;" src="bg1.html"></iframe>
<div class="pd">
<p class="tt">消息提示</p>
<span id="msgContent"></span>
<p class="btnbar"><input name="doClose" type="button" onClick="wclose();" value="确 定" class="btn01"/></p>
</div>
</div>


<div class="openCont" id="confirmMsgCont" style="width:300px; border:2px solid #9dcae4;display: none; z-index:9999;">
 <iframe frameborder="0" style="position:absolute;top:0px;left:0px; width:300px; height:147px;z-index:-1;" src="bg1.html"></iframe>
<div class="pd">
<p class="tt">消息提示</p>
<span id="confirmMsgContent"></span>
<p class="btnbar">
<input name="confirmDo" type="button" onClick= "linkUrl('/service/wsyyt/login/htnet_client.exe')"  id="confirmDo" value="确 定" class="btn01"/>
<input name="doClose" type="button" onClick="confirmClose();" value="取消" class="btn01"/></p>
</div>
</div>


<div id="doOver"></div>
<!-- 老的消息提示
<div id="msgCont" style=" text-align:center; display: none; " >
<p><img src="/service/pic/wsyyt/message/xxts_tt.jpg"  alt="消息提示"/></p>
<div class="text"><span id="msgContent"></span> </div>
<p><input type="button" class="btn01" onclick="wclose();" value="确 定"/></p>
</div>
 -->

 <!--首次登录密码设置-->
<div class="oplayer1" id="payshowp1" style="display:none; ">
<div class="tbar"><a href="javascript:void(0);" id="close_payshowp1" class="btn_close" onclick="Effect.openwin('payshowp1')">关闭</a></div>
<div class="browserTips">
<div id=con>
<ul id=tags>
  <li class=selectTag><A id="a1" onClick="selectTag('tagContent0',this)"  href="javascript:void(0)">1.身份验证</A> </li>
  <li><A id="a2" onClick="selectTag('tagContent1',this)"  href="javascript:void(0)">2.设置查询密码</A> </li></ul>
<div id=tagContent>
<div class="tagContent selectTag" id="tagContent0">
<p class="text1new">请填写相关信息，确认有效身份</p>
<div class="inp1new"><label>*您的姓名：</label><input id="trueName" name="trueName" type="text" /></div>
<div class="inp1new"><label>*身份证号：</label><input id="cardId" name="cardId" type="text" /></div>
<div class="inp1new"><label>*TA账号：</label><input id="taCardId" name="taCardId" type="text" /></div>
<div class="inp2new" ><span>*持有理财产品名称：</span>
<!-- <input type="checkbox" name="c0" id="00" /><label>无理财产品</label> -->
<input type="radio" name="belong" value="wu" id="wu" checked="checked" onclick="checkRadio(0)"/>无&nbsp; <input type="radio" name="belong" value="you" id="you" onclick="checkRadio(1)"/>有
<div id="inp2new"></div><span id="inp3new"></span><span id="inp4new"></span>
<!--
<input type="checkbox" name="c1" id="01" /><label for="01">紫金1号</label>
<input type="checkbox" name="c1" id="02" /><label for="02">多空如奕</label>
<input type="checkbox" name="c1" id="03" /><label for="03">天天发</label><br />
<input type="checkbox" name="c1" id="04" /><label for="04">新富1号</label>
<input type="checkbox" name="c1" id="05" /><label for="05">保证金1号</label>
-->
<P class="getbtn2"><input type="button" onclick="checkUserInfoForPass()" value="确定"/></P>
</div>

</div>
<div class="tagContent" id="tagContent1">
<p class="text1new">请输入查询密码<span>6-20位字符，可使用字母、数字或符合的组合，不建议试用纯数字，纯字母，纯符号</span></p>
<div class="inp1new"><label>密 码：</label><input name="passwordNew" id="passwordNew" type="password" /></div>
<div class="inp1new"><label>确认密码：</label><input name="passwordNew2" id="passwordNew2" type="password" /></div>
<div class="inp1new"><label>手机号：</label><input name="mobile" id="mobile" type="text" /><img id="verifyCodeImageImg1" style="display: none;" src="" border=0 />
<!-- <a class="get" name="getCode" id="getCode" onclick="getYzm()">获取验证码</a> -->
<input type="button" name="getCode" id="getCode" value="获取验证码" onclick="getYzm()"  style="background-color:#C9F2FA;width:100px">
</div>
<div class="inp1new"><label></label><input type="text" id="keyword" style="color: rgb(204, 204, 204);" name="keyword" value="输入验证码" onfocus="if(this.value=='输入验证码') {this.value='';}this.style.color='#333';" onblur="if(this.value=='') {this.value='输入验证码';this.style.color='#ccc';}" class="input"></div>
<p class="text2new">友情提醒：密码请定期修改，新密码请牢记，但不要明文记录在电脑或是纸张上</p>
<P class="getbtn2"><input type="button" onclick="insertPwdAndPhone()" value="确定"/></P>
</div>
</div></div>
<p>
<SCRIPT type=text/javascript>
	//检查是否有理财产品，code by baiwei 140319
	function checkRadio(i){
		var taCardId=jQuery("#taCardId").val();
		taCardId=jQuery.trim(taCardId);
		if(i==1&&taCardId==""){
			jQuery("input[name='belong'][value='you']").attr("checked",false);
			jQuery("input[name='belong'][value='wu']").attr("checked",true);

			alert("请输入TA账号信息!");
		}else{
			//alert("正在通过TA查找产品!!");
			mouseoverFromCardId();
		}



	}

function selectTag(showContent,selfObj){
	// 操作标签
	var tag = document.getElementById("tags").getElementsByTagName("li");
	var taglength = tag.length;
	for(i=0; i<taglength; i++){
		tag[i].className = "";
	}
	selfObj.parentNode.className = "selectTag";
	// 操作内容
	for(i=0; j=document.getElementById("tagContent"+i); i++){
		j.style.display = "none";
	}
	document.getElementById(showContent).style.display = "block";


}

function mouseoverFromCardId(){
	var cardId = jQuery("#cardId").val();
	var taCardId=jQuery("#taCardId").val();
		cardId = jQuery.trim(cardId);
		taCardId=jQuery.trim(taCardId);
	var innerHt = '';
	var inp3new='';
	var inp4new='';

	if(cardId.length == 0)
	{
		alert("请输入身份证号!");
		jQuery("#cardId").focus();
		return ;
	}else if(taCardId.length==0){
		alert("请输入TA账号信息!");
		jQuery("#taCardId").focus();
		return;
	}else{
		var data = [];
			data.push({name:'method', value:'getTaUserInfoByCardIdAndTaCardId'});
			data.push({name:'cardId', value:cardId});
			data.push({name:'taCardId',value:taCardId});
			jQuery.ajax({
			    type: "post",
			    url: "/service/loginAction.do",
			    data: data,
			    dataType:"json",
			    ontentType: "application/x-www-form-urlencoded; charset=UTF-8",
			    success: function(result){

					var message = result.message;
					//alert('message='+message);
					if(message=="true"){
						var lstProdNameNotInArr = result.lstProdNameNotInRand;
						var lstProdName = result.lstProdName;

						for(var i=0;i<lstProdNameNotInArr.length;i++){
						    innerHt = innerHt + '<input type="checkbox" name="c1" id="'+i+1+'" value="'+lstProdNameNotInArr[i]+'" /><label >'+lstProdNameNotInArr[i]+'</label>';
						}
						//for(var i=0;i<lstProdNameNotInArr.length;i++){
						 //   inp4new = inp4new + '<input type="checkbox" style="display:none" name="c1" id="'+i+1+'" value="'+lstProdNameNotInArr[i]+'" /><label //>'+lstProdNameNotInArr[i]+'</label>';
					//	}
						inp3new = inp3new +'<input type="hidden" value="'+result.taUserCustName+'" id="taUserCustName"/>';
						inp3new = inp3new +'<input type="hidden" value="'+result.taUserTaAccountId+'" id="taUserTaAccountId"/>';
						inp3new = inp3new +'<input type="hidden" value="'+result.lstProdName+'" id="lstProdName"/>';
						//如果选择"无"，则清空复选框内容,如果选择有则将数据以复选框的形式显示
						var belong=jQuery("input[name='belong']:checked").val();
						document.getElementById("inp3new").innerHTML = inp3new;
						if(belong=="wu"){
						//	document.getElementById("inp4new").innerHTML =inp4new;
							document.getElementById("inp2new").innerHTML = "";

						}else{
						document.getElementById("inp2new").innerHTML = innerHt;

						}
						//alert("taUserCustName="+jQuery("#taUserCustName").val());
					}else{


						//jQuery("#cardId").focus();
						jQuery("input[name='belong'][value='you']").attr("checked",false);
						jQuery("input[name='belong'][value='wu']").attr("checked",true);
						document.getElementById("inp2new").innerHTML = "";
						alert("您输入的信息有误，请重新输入！");
					}


						//alert(message);


			   }
			});
	}

}
function checkUserInfoForPass(){

	if(checkBaseInfo()){

	if(checkUserInfo()){
		mouseoverFromCardId();
		var a2 = document.getElementById("a2");
		jQuery("#a2").attr("onclick","selectTag('tagContent1',a2)");
		selectTag('tagContent1',a2);
		//document.getElementById("tagContent0").style.display = "none";
		//document.getElementById("tagContent1").style.display = "block";
	}
	}
	//mouseoverFromCardId();
}

	function checkBaseInfo(){

	var taUserCustName = jQuery("#taUserCustName").val();

		taUserCustName = jQuery.trim(taUserCustName);
	var taUserTaAccountId = jQuery("#taUserTaAccountId").val();

		taUserTaAccountId = jQuery.trim(taUserTaAccountId);

	//var belong=jQuery("input[name='belong'][value='you']").attr("checked",true);
		//alert("belong="+belong);
		//document.getElementById("you").checked

	var lstProdName = jQuery("#lstProdName").val();

	var trueName = jQuery("#trueName").val();

		trueName = jQuery.trim(trueName);

	var taCardId = jQuery("#taCardId").val();

		taCardId = jQuery.trim(taCardId);

	//if(null!=lstProdName.length){
	//var str=lstProdName.toString().split(',');
	//}
		//alert("xu:str.length="+str.length);
	//验证姓名
	if(trueName.length == 0){
		alert("姓名未填写！");
		jQuery("#trueName").focus();
		return false;
	}else{
		if(trueName==taUserCustName){
		//document.getElementById("tagContent1").style.display = "none";

		}else{
			alert("您的身份验证未能通过,请重新填写！");
			return  false;
		}
	}
	//验证Ta帐号
	if(taCardId.length == 0){
		alert("Ta帐号未填写！");
		jQuery("#taCardId").focus();
		return false;
	}else{
		if(taCardId==taUserTaAccountId){
		//document.getElementById("tagContent1").style.display = "none";

		}else{
			alert("您的身份验证未能通过,请重新填写！");
			return  false;
		}
	}
	return true;
	}

function checkUserInfo(){
	var taUserCustName = jQuery("#taUserCustName").val();

		taUserCustName = jQuery.trim(taUserCustName);
	var taUserTaAccountId = jQuery("#taUserTaAccountId").val();

		taUserTaAccountId = jQuery.trim(taUserTaAccountId);

	//var belong=jQuery("input[name='belong'][value='you']").attr("checked",true);
		//alert("belong="+belong);
		//document.getElementById("you").checked

	var lstProdName = jQuery("#lstProdName").val();

	var trueName = jQuery("#trueName").val();

		trueName = jQuery.trim(trueName);

	var taCardId = jQuery("#taCardId").val();

		taCardId = jQuery.trim(taCardId);

	if(null!=lstProdName.length){
	var str=lstProdName.toString().split(',');
	}

	//var aa = document.getElementsByName("c1");

    var ss = 0;

    var cLength= jQuery("input[name='c1']:checked").length;

   // var c0Length= jQuery("input[name='c0']:checked").length;
    //alert(cLength);
	//alert(lstProdName.length);
	//如果客户未持有产品
	//是否勾选了无理财产品
	if(document.getElementById("you").checked && null!=lstProdName.length){
		if(lstProdName.length == 0 && cLength>0){
			alert("您的身份验证未能通过,请重新填写！");
	        return  false;
	    }else if(cLength < str.length){

	    		alert("您的身份验证未能通过,请重新填写！");
	        	return  false;
	   } else {
	    	jQuery("input[name='c1']:checked").each(function(){
	    		var checkedVal = jQuery(this).val();
	    		for(var i=0;i<str.length;i++){

	    			if(checkedVal == str[i]){
	    			ss++;
	    			}
	    	}
	    	});
	    	if(ss==str.length && cLength==str.length){

	    	}else{
	    		alert("您的身份验证未能通过,请重新填写！");
				return  false;
	    	}

		}
	}else{
		 if(lstProdName.length!=0){
			 //alert('lstProdName.length='+lstProdName.length);
		alert("您的身份验证未能通过,请重新填写！");
				return  false;
		}
	}

	return  true;

}

function insertPwdAndPhone(){
	var passwordNew = jQuery("#passwordNew").val();
		passwordNew = jQuery.trim(passwordNew);
	var passwordNew2 = jQuery("#passwordNew2").val();
		passwordNew2 = jQuery.trim(passwordNew2);

	var sjyzm = jQuery("#keyword").val();
	 	sjyzm = jQuery.trim(sjyzm);

	if(passwordNew.length == 0){
        alert("查询证密码不能为空！");
        jQuery("#passwordNew").focus();
        return ;
	}
	if(passwordNew.length > 20){
        alert("查询证密码不能大于20个字符！");
        jQuery("#passwordNew").focus();
        return ;
	}

	if(passwordNew2.length == 0){
        alert("确认密码不能为空！");
        jQuery("#passwordNew2").focus();
        return ;
	}

	if(passwordNew != passwordNew2){
		alert("两次输入的密码不一致！");
        jQuery("#passwordNew2").focus();
        return ;
	}
	if(sjyzm.length == 0){
        alert("验证码不能为空！");
        jQuery("#keyword").focus();
        return ;
	}

	var mobile = jQuery("#mobile").val();
		mobile = jQuery.trim(mobile);
	if( mobile ==""){
		alert("请填写手机号码！");
		jQuery("#mobile").focus();
		return ;
	}
	jQuery.ajax({
		url:'/service/addBasicInfo.do',
		data:'method=getVerifyCodeIsValid&telphone='+mobile+'&sjyzm='+sjyzm,
		type:'post',
		async:false,
		dataType:'text',
		ontentType: "application/x-www-form-urlencoded; charset=UTF-8",
		success:function(response){
			if(response == "false"){
				alert("验证码不正确！");
	           	jQuery("#keyword").focus();
				return false;
			}else if(response == "true"){

				doSub();
			}
		}
		});

}

function doSub(){
	var cardId = jQuery("#cardId").val();
		cardId = jQuery.trim(cardId);
	var passwordNew = jQuery("#passwordNew").val();
		passwordNew = jQuery.trim(passwordNew);
	var mobile = jQuery("#mobile").val();
		mobile = jQuery.trim(mobile);
	var taCardId = jQuery("#taCardId").val();
		taCardId = jQuery.trim(taCardId);
	var data = [];
		data.push({name:'method', value:'modifypwdFirst'});
		data.push({name:'cardId', value:cardId});
		data.push({name:'passwordnew', value:passwordNew});
		data.push({name:'mobile', value:mobile});
		data.push({name:'taCardId', value:taCardId});
		jQuery.ajax({
		    type: "post",
		    url: "/service/loginAction.do",
		    data: data,
		    dataType:"json",
			success:function(response){
				if(response.success == "false"){
					alert("未设置成功，请重新设置！");
		            jQuery("#passwordNew").focus();
					return false;
				}else if(response.success == "true"){
					alert(response.msg);
				//	alert('111');
					Effect.openwin('payshowp1');
				//	alert('222');
					//jQuery("#close_payshowp1").click();
				}
			}
			});
}

var wait=180;

function time(o) {
	if (wait == 0) {
		o.removeAttribute("disabled");
		document.getElementById("getCode").className="get"
		o.value="点击获取验证码";
		wait = 180;
	} else {
		document.getElementById("getCode").className="get"
		o.setAttribute("disabled", true);
		o.value="重新发送(" + wait + ")";
		wait--;
		setTimeout(function() {
			time(o)
		},
		1000)
	}
}

function getYzm(){


	document.getElementById('verifyCodeImageImg1').src = '/service/share/verifyCode.jsp?ran='
		+ Math.random();

	var mobilePattern = /^1[3|4|5|8][0-9]\d{8}$/;
	var mobile = jQuery("#mobile").val();
	    mobile = jQuery.trim(mobile);

	if(mobile != null && mobile !="" && mobilePattern.exec(mobile)){

		//time(document.getElementById("getCode"));
		jQuery.ajax({
			url:'/service/addBasicInfo.do',
			data:'method=addBasicInfoRzrq&telphone='+mobile+'&sendMessageNum='+10,
			type:'post',
			dataType:'text',
			success:function(response){

				if(response != ""){
					alert(response);
					if(response == "验证码已发送,请查收!"){

					time(document.getElementById("getCode"));
					}

				}
			}
		});
	}else{
		alert("请输入正确的手机号!");
	}

}

if(typeof String.prototype.trim !== 'function') {
	String.prototype.trim = function() {
		return this.replace(/^\s+|\s+$/g, '');
	}
}

</SCRIPT>
</p>
</div>
</div>
<div id="winmask" style="display:none;"></div>
<!--首次登录密码设置 结束-->



<!--密码重置-->
<div class="oplayer1" id="payshowp2" style="display:none; ">
<div class="tbar"><a href="javascript:void(0);" class="btn_close" onclick="Effect.openwin('payshowp2')">关闭</a></div>
<div id="tagContent" class="browserTips">
<p class="text1new">密码修改<span>6-20位字符，可使用字母、数字或符合的组合，不建议试用纯数字，纯字母，纯符号</span></p>
<div class="inp1new"><label>姓	名：</label><input name="trueNameReset" id="trueNameReset" type="text" /></div>
<div class="inp1new"><label>身份证号：</label><input name="cardIdReset" id="cardIdReset" type="text"/></div>
<div class="inp1new"><label>手机号：</label><input name="mobileReset" id="mobileReset" type="text" /><img id="verifyCodeImageImg2" style="display: none;" src="" border=0 /><span id="alertMsg" style="color:red"></span>

<input type="button" name="getCodeReset" id="getCodeReset" value="点击获取验证码" onclick="getYzmReset()"  style="background-color:#C9F2FA;width:100px">
<!--
 <a class="get" name="getCodeReset" id="getCodeReset" onclick="getYzmReset()"><span style="color:black">获取验证码</span></a>
-->
</div>
<div class="inp1new"><label></label><input type="text" style="color: rgb(204, 204, 204);" name="keywordReset" id="keywordReset" value="请输入验证码" onfocus="if(this.value=='请输入验证码') {this.value='';}this.style.color='#333';" onblur="if(this.value=='') {this.value='请输入验证码';this.style.color='#ccc';}" class="input"></div>
<div class="inp1new"><label>新密码：</label><input name="pwdReset" id="pwdReset" type="password" /></div>
<div class="inp1new"><label>确认新密码：</label><input name="pwdReset2" id="pwdReset2" type="password"/></div>
<p class="text2new">友情提醒：密码请定期修改，新密码请牢记，但不要明文记录在电脑或是纸张上</p>
<P class="getbtn2"><input type="button" onclick="verifyAndComfirm()" value="确定"/></P>
</div>
</div>
<div id="winmask" style="display:none;"></div>
<!--密码重置 结束-->

<script language="JavaScript" type="text/javascript">
	function verifyAndComfirm(){
		var trueNameReset = jQuery("#trueNameReset").val();
	    trueNameReset = jQuery.trim(trueNameReset);
	var cardIdReset = jQuery("#cardIdReset").val();
	    cardIdReset = jQuery.trim(cardIdReset);
	var mobileReset = jQuery("#mobileReset").val();
	    mobileReset = jQuery.trim(mobileReset);
	var keywordReset = jQuery("#keywordReset").val();
	    keywordReset = jQuery.trim(keywordReset);
	var pwdReset = jQuery("#pwdReset").val();
	    pwdReset = jQuery.trim(pwdReset);
	var pwdReset2 = jQuery("#pwdReset2").val();
	    pwdReset2 = jQuery.trim(pwdReset2);
	if(trueNameReset.length == 0){
		 alert("姓名不能为空！");
        //resetTwoPwd();
        return false;
		}
	if(cardIdReset.length == 0){
        alert("身份证号不能为空！");
        //resetTwoPwd();
        return false;
	}
	if(pwdReset.length == 0){
        alert("查询密码不能为空！");
        //resetTwoPwd();
        return false;
	}
	if(pwdReset.length > 20){
        alert("查询密码不能大于20个字符！");
       // resetTwoPwd();
        return false;
	}

	if(pwdReset2.length == 0){
        alert("确认密码不能为空！");
       // resetTwoPwd();
        return false;
	}

	if(pwdReset != pwdReset2){
		alert("两次输入的密码不一致！");
        //resetTwoPwd();
        return false;
	}
	if(keywordReset.length == 0){
        alert("验证码不能为空！");
       // resetTwoPwd();
        return false;
	}

	if( mobileReset.length ==0){
		alert("请填写手机号码！");
		//jQuery("#mobileReset").focus();
		//resetTwoPwd();
		return false;
	}


	var innerHt = '';

		var data = [];
			data.push({name:'method', value:'getTaUserInfoByCardId'});
			data.push({name:'cardId', value:cardIdReset});
			jQuery.ajax({
			    type: "post",
			    url: "/service/loginAction.do",
			    data: data,
			    dataType:"json",
			    ontentType: "application/x-www-form-urlencoded; charset=UTF-8",
			    success: function(result){
				var message = result.message;
				//alert(message);

				if(message=="true"){
					var taUserCustNameReset = result.taUserCustName;


					var taUserTelNoReset = result.taUserTelNo;


					if(trueNameReset != taUserCustNameReset){
						alert("姓名与身份证号不匹配！");
						//jQuery("#trueNameReset").focus();
						//resetTwoPwd();
						return false;
					}
					if(mobileReset != taUserTelNoReset){

					//alert("taUserTelNoReset="+taUserTelNoReset);
						alert("手机号与设置初始查询密码的手机号不匹配！");


					//	jQuery("#mobileReset").focus();
						//resetTwoPwd();
						return false;
					}
					//验证手机验证码

					jQuery.ajax({
						url:'/service/addBasicInfo.do',
						data:'method=getVerifyCodeIsValid&telphone='+mobileReset+'&sjyzm='+keywordReset,
						type:'post',
						async:false,
						dataType:'text',
						ontentType: "application/x-www-form-urlencoded; charset=UTF-8",
						success:function(response){
							if(response == "false"){

								alert("验证码不正确！");

					           	jQuery("#keywordReset").focus();
					           //	resetTwoPwd();
								return false;
							}else if(response == "true"){
								//jQuery("#pwdReset").removeAttr("readonly");
								//jQuery("#pwdReset2").removeAttr("readonly");
								var trueNameReset = jQuery("#trueNameReset").val();
	    trueNameReset = jQuery.trim(trueNameReset);
	var cardIdReset = jQuery("#cardIdReset").val();
	    cardIdReset = jQuery.trim(cardIdReset);
	var mobileReset = jQuery("#mobileReset").val();
	    mobileReset = jQuery.trim(mobileReset);
	var keywordReset = jQuery("#keywordReset").val();
	    keywordReset = jQuery.trim(keywordReset);
	var pwdReset = jQuery("#pwdReset").val();
	    pwdReset = jQuery.trim(pwdReset);
	var pwdReset2 = jQuery("#pwdReset2").val();
	    pwdReset2 = jQuery.trim(pwdReset2);



	var data = [];
		data.push({name:'method', value:'modifypwdByMoblie'});
		data.push({name:'cardId', value:cardIdReset});
		data.push({name:'passwordnew', value:pwdReset});
		jQuery.ajax({
		    type: "post",
		    url: "/service/loginAction.do",
		    data: data,
		    dataType:"json",
			success:function(response){
				if(response.success == "false"){
					alert("未设置成功，请重新设置");
		            jQuery("#passwordNew").focus();
					return false;
				}else if(response.success == "true"){
					alert(response.msg);
					Effect.openwin('payshowp2');
				}
			}
			});
								return true;
							}
						}
						});


					//innerHt = innerHt +'<input type="hidden" value="'+result.taUserCustName+'" id="taUserCustNameReset"/>';
					//innerHt = innerHt +'<input type="hidden" value="'+result.taUserTelNo+'" id="taUserTelNoReset"/>';
					//document.getElementById("inp3new").innerHTML = innerHt;
				}else{
					alert("该身份证无相应信息！");
					//jQuery("#cardIdReset").focus();
		           	//resetTwoPwd();
					return false;
				}

			   }
			});


		}



function mouseoverFromHere(){
	var trueNameReset = jQuery("#trueNameReset").val();
	    trueNameReset = jQuery.trim(trueNameReset);
	var cardIdReset = jQuery("#cardIdReset").val();
	    cardIdReset = jQuery.trim(cardIdReset);
	var mobileReset = jQuery("#mobileReset").val();
	    mobileReset = jQuery.trim(mobileReset);
	var keywordReset = jQuery("#keywordReset").val();
	    keywordReset = jQuery.trim(keywordReset);
	var pwdReset = jQuery("#pwdReset").val();
	    pwdReset = jQuery.trim(pwdReset);
	var pwdReset2 = jQuery("#pwdReset2").val();
	    pwdReset2 = jQuery.trim(pwdReset2);
	if(trueNameReset.length == 0){
		 alert("姓名不能为空！");
        //resetTwoPwd();
        return false;
		}
	if(cardIdReset.length == 0){
        alert("身份证号不能为空！");
        //resetTwoPwd();
        return false;
	}
	if(pwdReset.length == 0){
        alert("查询密码不能为空！");
        //resetTwoPwd();
        return false;
	}
	if(pwdReset.length > 20){
        alert("查询密码不能大于20个字符！");
       // resetTwoPwd();
        return false;
	}

	if(pwdReset2.length == 0){
        alert("确认密码不能为空！");
       // resetTwoPwd();
        return false;
	}

	if(pwdReset != pwdReset2){
		alert("两次输入的密码不一致！");
        //resetTwoPwd();
        return false;
	}
	if(keywordReset.length == 0){
        alert("验证码不能为空！");
       // resetTwoPwd();
        return false;
	}

	if( mobileReset.length ==0){
		alert("请填写手机号码！");
		//jQuery("#mobileReset").focus();
		//resetTwoPwd();
		return false;
	}


	var innerHt = '';

		var data = [];
			data.push({name:'method', value:'getTaUserInfoByCardId'});
			data.push({name:'cardId', value:cardIdReset});
			jQuery.ajax({
			    type: "post",
			    url: "/service/loginAction.do",
			    data: data,
			    dataType:"json",
			    ontentType: "application/x-www-form-urlencoded; charset=UTF-8",
			    success: function(result){
				var message = result.message;
				alert(message);

				if(message=="true"){
					var taUserCustNameReset = result.taUserCustName;


					var taUserTelNoReset = result.taUserTelNo;


					if(trueNameReset != taUserCustNameReset){
						alert("姓名与身份证号不匹配！");
						//jQuery("#trueNameReset").focus();
						//resetTwoPwd();
						return false;
					}
					if(mobileReset != taUserTelNoReset){

					//alert("taUserTelNoReset="+taUserTelNoReset);
						alert("手机号与设置初始查询密码的手机号不匹配！");


					//	jQuery("#mobileReset").focus();
						//resetTwoPwd();
						return false;
					}
					//验证手机验证码

					jQuery.ajax({
						url:'/service/addBasicInfo.do',
						data:'method=getVerifyCodeIsValid&telphone='+mobileReset+'&sjyzm='+keywordReset,
						type:'post',
						async:false,
						dataType:'text',
						ontentType: "application/x-www-form-urlencoded; charset=UTF-8",
						success:function(response){
							if(response == "false"){

								alert("验证码不正确！");

					           	jQuery("#keywordReset").focus();
					           //	resetTwoPwd();
								return false;
							}else if(response == "true"){
								//jQuery("#pwdReset").removeAttr("readonly");
								//jQuery("#pwdReset2").removeAttr("readonly");
								return true;
							}
						}
						});


					//innerHt = innerHt +'<input type="hidden" value="'+result.taUserCustName+'" id="taUserCustNameReset"/>';
					//innerHt = innerHt +'<input type="hidden" value="'+result.taUserTelNo+'" id="taUserTelNoReset"/>';
					//document.getElementById("inp3new").innerHTML = innerHt;
				}else{
					alert("该身份证无相应信息！");
					//jQuery("#cardIdReset").focus();
		           	//resetTwoPwd();
					return false;
				}

			   }
			});


}

function resertPwd(){
	var trueNameReset = jQuery("#trueNameReset").val();
	    trueNameReset = jQuery.trim(trueNameReset);
	var cardIdReset = jQuery("#cardIdReset").val();
	    cardIdReset = jQuery.trim(cardIdReset);
	var mobileReset = jQuery("#mobileReset").val();
	    mobileReset = jQuery.trim(mobileReset);
	var keywordReset = jQuery("#keywordReset").val();
	    keywordReset = jQuery.trim(keywordReset);
	var pwdReset = jQuery("#pwdReset").val();
	    pwdReset = jQuery.trim(pwdReset);
	var pwdReset2 = jQuery("#pwdReset2").val();
	    pwdReset2 = jQuery.trim(pwdReset2);



	var data = [];
		data.push({name:'method', value:'modifypwdByMoblie'});
		data.push({name:'cardId', value:cardIdReset});
		data.push({name:'passwordnew', value:pwdReset});
		jQuery.ajax({
		    type: "post",
		    url: "/service/loginAction.do",
		    data: data,
		    dataType:"json",
			success:function(response){
				if(response.success == "false"){
					alert("未设置成功，请重新设置");
		            jQuery("#passwordNew").focus();
					return false;
				}else if(response.success == "true"){
					alert(response.msg);
					Effect.openwin('payshowp2');
				}
			}
			});

}

var waitReset=180;

function timeReset(o) {
	if (waitReset == 0) {
		o.removeAttribute("disabled");
		document.getElementById("getCodeReset").className="get"
		o.value="点击获取验证码";
		waitReset = 180;
	} else {
		document.getElementById("getCodeReset").className="get"
		o.setAttribute("disabled", true);
		o.value="重新发送(" + waitReset + ")";
		waitReset--;
		setTimeout(function() {
			timeReset(o)
		},
		1000)
	}
}

//function resetTwoPwd(){
//		jQuery("#pwdReset").attr("readonly","readonly");
//		jQuery("#pwdReset2").attr("readonly","readonly");
//		jQuery("#pwdReset").val("");
//		jQuery("#pwdReset2").val("");
//}
function getYzmReset(){
	//alert(11);

	document.getElementById('verifyCodeImageImg2').src = '/service/share/verifyCode.jsp?ran='
		+ Math.random();
	var mobilePattern = /^1[3|4|5|8][0-9]\d{8}$/;
	var mobile = jQuery("#mobileReset").val();
	    mobile = jQuery.trim(mobile);
	if(mobile != null && mobile !="" && mobilePattern.exec(mobile)){
		timeReset(document.getElementById("getCodeReset"));
		jQuery.ajax({
			url:'/service/addBasicInfo.do',
			data:'method=addBasicInfoRzrq&telphone='+mobile+'&sendMessageNum='+10,
			type:'post',
			dataType:'text',
			success:function(response){
				if(response != ""){
					alert(response);
					if(response == "验证码已发送,请查收!"){
					timeReset(document.getElementById("getCodeReset"));
					}
				}
			}
		});
	}else{
		alert("请输入正确的手机号!");
	}

}

if(typeof String.prototype.trim !== 'function') {
	String.prototype.trim = function() {
		return this.replace(/^\s+|\s+$/g, '');
	}
}
</script>
</body>
</html>

<script language="JavaScript" type="text/javascript">
	DetectActiveX();
	var isIE = 'false';
	var jsSSL = 'true';
	password1=null;
    //密码键盘
	initCalc();
	document.getElementById("keyboard").onclick=Function("password1=document.getElementById('password');showkeyboard();Calc.password.value='';");
</script>


<script language="JavaScript" type="text/javascript">
//提示框都放在最底部
if("验证码错误"!=""){
	showAlertMsg("验证码错误"); //显示alert层

}
	document.getElementById("userName").focus();

//控件回车换行
function setListener(idname){
   try{
       var obj = document.getElementById(idname);
        obj.SetFocusName("nextfocus",1);
   }catch(e){ }
}

function nextfocus(){
    document.getElementById("servicePwd").focus();
}

setListener("DCsswebLogin1");
</script>
